# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∞–ª—å–±–æ–º–æ–≤ —á–µ—Ä–µ–∑ Telegram

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã

| –°—Ç–∞—Ç—É—Å | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –¶–≤–µ—Ç |
|--------|-----|----------|------|
| **–û–∂–∏–¥–∞–Ω–∏–µ** | `waiting` | –ê–ª—å–±–æ–º —Å–æ–∑–¥–∞–Ω, –æ–∂–∏–¥–∞–µ—Ç –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã | üîµ –°–µ—Ä—ã–π |
| **–í—ã–≥—Ä—É–∑–∫–∞** | `upload` | –ò–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞/–≤—ã–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ | üîµ –°–∏–Ω–∏–π |
| **–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ** | `sent` | –ê–ª—å–±–æ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É | üîµ –°–∏–Ω–∏–π —Ç–µ–º–Ω—ã–π |
| **–ü—Ä–∏–Ω—è—Ç–æ** | `accepted` | –ê–ª—å–±–æ–º –ø—Ä–∏–Ω—è—Ç –±–µ–∑ –∑–∞–º–µ—á–∞–Ω–∏–π | üü¢ –ó–µ–ª–µ–Ω—ã–π |
| **–ó–∞–º–µ—á–∞–Ω–∏—è** | `remarks` | –ï—Å—Ç—å –∑–∞–º–µ—á–∞–Ω–∏—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ | üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π |
| **–í –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ** | `production` | –ê–ª—å–±–æ–º –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ | üü£ –§–∏–æ–ª–µ—Ç–æ–≤—ã–π |

---

## üí¨ –ö–∞–∫ –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã —á–µ—Ä–µ–∑ Telegram

### –§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã:
```
<–ö–û–î_–ê–õ–¨–ë–û–ú–ê> <–ê–õ–ò–ê–°_–°–¢–ê–¢–£–°–ê>
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```
–ê–†-001 –æ–∫
–ö–†-002 +
–ê–†-003 –∑–∞–º–µ—á–∞–Ω–∏—è
–ö–†-004 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
–ê–†-005 !
```

### ‚úÖ –ú–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏:

```
–ê–†-001 –æ–∫
–ö–†-002 –∑–∞–º–µ—á–∞–Ω–∏—è
–ê–†-003 –æ—Ç–ø—Ä–∞–≤–∏–ª
```

---

## üéØ –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–ª–∏–∞—Å–æ–≤

### ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ (`waiting`)
- `–æ–∂–∏–¥–∞–Ω–∏–µ`
- `–æ–∂–∏–¥–∞–µ–º`
- `–æ–∂–∏–¥–∞–µ—Ç`
- `‚è≥`

### üì§ –í—ã–≥—Ä—É–∑–∫–∞ (`upload`)
- `–≤—ã–≥—Ä—É–∑–∫–∞`
- `–∑–∞–≥—Ä—É–∑–∫–∞`
- `–≤—ã–≥—Ä—É–∑–∏–ª`
- `–∑–∞–≥—Ä—É–∑–∏–ª`
- `üì§`
- `‚¨ÜÔ∏è`

### ‚úâÔ∏è –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (`sent`)
- `–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ`
- `–æ—Ç–ø—Ä–∞–≤–∏–ª`
- `–æ—Ç–ø—Ä–∞–≤–∏–ª–∞`
- `–æ—Ç–ø—Ä–∞–≤–∏–ª–∏`
- `‚Üí`
- `‚û°Ô∏è`
- `‚úâÔ∏è`

### ‚úÖ –ü—Ä–∏–Ω—è—Ç–æ (`accepted`)
- `–ø—Ä–∏–Ω—è—Ç–æ`
- `–ø—Ä–∏–Ω—è–ª`
- `–ø—Ä–∏–Ω—è–ª–∞`
- `–ø—Ä–∏–Ω—è–ª–∏`
- `–æ–∫`
- `ok`
- `+`
- `‚úì`
- `‚úÖ`
- `üëç`

### ‚ö†Ô∏è –ó–∞–º–µ—á–∞–Ω–∏—è (`remarks`)
- `–∑–∞–º–µ—á–∞–Ω–∏—è`
- `–∑–∞–º–µ—á–∞–Ω–∏–µ`
- `–¥–æ—Ä–∞–±–æ—Ç–∫–∞`
- `–¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å`
- `!`
- `!!`
- `‚ùå`
- `‚ö†Ô∏è`
- `üëé`

### üè≠ –í –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ (`production`)
- `–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ`
- `–≤–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ`
- `–≤–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ`
- `üè≠`
- `‚öôÔ∏è`

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

1. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞** —É–∫–∞–∂–∏—Ç–µ Telegram –∫–∞–Ω–∞–ª/–≥—Ä—É–ø–ø—É
2. **–î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞** –≤ —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª (—Å–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —á–∞—Ç–∞** –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞
4. **–í—Å—Ç–∞–≤—å—Ç–µ ID** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤ KlamBot.ru

---

## üìä API Endpoints

### –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∞–ª—å–±–æ–º–∞
```http
PUT /api/companies/:companyId/projects/:projectId/albums/:albumId/status
Content-Type: application/json

{
  "statusCode": "accepted",
  "comment": "–í—Å–µ –∑–∞–º–µ—á–∞–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã"
}
```

### –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞
```http
GET /api/companies/:companyId/projects/:projectId/albums/:albumId/status-history
```

–û—Ç–≤–µ—Ç:
```json
[
  {
    "id": 123,
    "createdAt": "2025-11-25T10:30:00Z",
    "oldStatus": {
      "code": "sent",
      "name": "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
    },
    "newStatus": {
      "code": "accepted",
      "name": "–ü—Ä–∏–Ω—è—Ç–æ"
    },
    "changedBy": {
      "firstName": "–ò–≤–∞–Ω",
      "lastName": "–ò–≤–∞–Ω–æ–≤"
    },
    "changedByTelegramId": 123456789,
    "comment": "–í—Å–µ –∑–∞–º–µ—á–∞–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã"
  }
]
```

---

## üé® –ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–∏–µ–º–∫–∞:
```
–ê–†-001 –æ–∫
–ê–†-002 +
–ö–†-003 ‚úì
```

### –° –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:
```
–ü—Ä–æ–≤–µ—Ä–∏–ª –≤—Å–µ –∞–ª—å–±–æ–º—ã:
–ê–†-001 –ø—Ä–∏–Ω—è—Ç–æ
–ê–†-002 –∑–∞–º–µ—á–∞–Ω–∏—è
–ê–†-003 –æ–∫
```

### –° —ç–º–æ–¥–∑–∏:
```
–ê–†-001 ‚úÖ
–ö–†-002 ‚ö†Ô∏è
–ê–†-003 üëç
```

---

## ‚ö° –†–µ–∞–∫—Ü–∏—è –±–æ—Ç–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç:
```
‚úÖ –ê–ª—å–±–æ–º –ê–†-001 ‚Üí –ü—Ä–∏–Ω—è—Ç–æ
```

–ü—Ä–∏ –æ—à–∏–±–∫–µ:
```
‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∞–ª—å–±–æ–º–∞ –ê–†-001
```

---

## üîç –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `album_status_history`:
- –ö—Ç–æ –∏–∑–º–µ–Ω–∏–ª (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–ª–∏ Telegram ID)
- –°—Ç–∞—Ä—ã–π –∏ –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
- –í—Ä–µ–º—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –∞–ª–∏–∞—Å—ã** –¥–ª—è –±—ã—Å—Ç—Ä–æ—Ç—ã (`+`, `!`, `‚Üí`)
2. **–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã** –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
3. **–î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç** –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–∞–∫—Ü–∏—é –±–æ—Ç–∞** –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

## üõ†Ô∏è –§–∞–π–ª—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- `server/migrations/001_initial_schema.sql` - —Å—Ö–µ–º–∞ –ë–î —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- `server/migrations/002_seed_dictionaries.sql` - seed –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- `server/migrations/008_add_album_status_history.sql` - —Ç–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏
- `server/src/utils/statusAliases.ts` - –ø–∞—Ä—Å–µ—Ä –∞–ª–∏–∞—Å–æ–≤
- `server/src/bot/index.ts` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram
- `server/src/controllers/albumController.ts` - API endpoints
- `server/src/routes/companies.ts` - –º–∞—Ä—à—Ä—É—Ç—ã

---

**–ì–æ—Ç–æ–≤–æ! üéâ** –°–∏—Å—Ç–µ–º–∞ —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–æ–≤ —á–µ—Ä–µ–∑ Telegram –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞.
